# 議事録：週次ブログ自動生成システムの設計

**日時：** 2026年2月19日  
**参加者：** masa、Claude  
**目的：** LLMとの議論ログを週次で自動的にブログ記事化するGitHub Actionsワークフローの設計と実装

-----

## 背景・課題

masaさんは `decision-logs-with-llm` リポジトリにLLMとの議論議事録をmdファイルで蓄積している。これを毎週手動でブログ化するのは手間がかかるため、自動化したいという要望が出発点。

-----

## 意思決定の流れ

### 1. 対象ファイルの絞り込み方針

**前提：** リポジトリの `/logs` 配下に以下の2パターンでファイルが存在する。

```
/logs
└ 20260218-aaa.md        # ファイル名先頭に日付
└ 20260218-bbb.md
└ 20260223/              # ディレクトリ名先頭に日付
  └ ddd.md
  └ eee.md
```

**決定：** ファイル名・ディレクトリ名先頭の `yyyymmdd` を数値として比較し、過去7日間のものを対象にする。ファイル直置きとディレクトリ混在の両パターンに対応する。

→ 成果物：`artifact-01-file-collector.md`

-----

### 2. ブログ記事の要件定義

以下を順に決定した。

**トーン：** ちょっとだけ丁寧にする（チャットよりは丁寧、でも硬くない）

**構成：**

1. 導入（今週何を考えていたか）
1. 今週の議論ハイライト
1. 気づき・学び
1. 各議論の要約 + masaのブラックユーモアな冷静ツッコミ
1. 来週やってみたいこと

**文字数：** 2000文字以上（長め）

**投稿先：** note

**文体の特徴：**

- AIっぽい美文・まとめ感を出さない
- 迷いや矛盾をそのまま残す
- ブラックユーモアを要所に（やりすぎない）
- 最後に綺麗にまとめない

**文体サンプルの管理方法：** 専用ファイルは作らず、システムプロンプトに直書きする（シンプルで管理が楽なため）

→ 成果物：`artifact-02-blog-prompt.md`

-----

### 3. 英語版ブログの追加

同じワークフロー内で日本語生成の直後に英語版も生成することに決定。

- 日本語版：`blog/20260225-weekly.md`
- 英語版：`blog/20260225-weekly-en.md`

英語版プロンプトも同様にmasaのキャラクター（dry black humor、don’t end neatly）を反映させる。

-----

### 4. ワークフロー全体の構成

**実行タイミング：** 毎週月曜 9:00 UTC（日本時間18:00）+ 手動実行（`workflow_dispatch`）

**処理の流れ：**

1. リポジトリをチェックアウト
1. `/logs` 配下から過去7日分のmdファイルを収集
1. Claude API（`claude-opus-4-6`）に投げて日本語ブログ生成
1. 同様に英語版ブログ生成
1. `blog/` フォルダにコミット・プッシュ

**必要な設定：** リポジトリの Secrets に `ANTHROPIC_API_KEY` を登録

→ 成果物：`artifact-03-workflow.md`

-----

## 成果物一覧

|ファイル名                          |内容                                                          |
|-------------------------------|------------------------------------------------------------|
|`artifact-01-file-collector.md`|ファイル収集スクリプト（bash）                                           |
|`artifact-02-blog-prompt.md`   |ブログ生成プロンプト（日本語・英語）                                          |
|`artifact-03-workflow.md`      |GitHub Actions ワークフロー全体（`.github/workflows/weekly-blog.yml`）|

-----

## 今後の課題・検討事項

- ブログのクオリティは初回実行後に確認し、プロンプトを微調整する
- noteへの自動投稿（API連携）は今回スコープ外。現状は `blog/` フォルダへのコミットまで。
- 対象ファイルが0件のとき、ワークフローは早期終了する（エラーにはならない）