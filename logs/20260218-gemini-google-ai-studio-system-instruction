# 議事録：Google AI Studio用 カスタムプロンプト策定プロセス

## 概要
* **目的:** Google AI Studioでのアプリ開発（Googleドライブ連携・要約アプリ等）において、AIが常に一定のルール（`CLAUDE.md`のような役割）に従って開発を進めるための仕組みを構築する。
* **アプローチ:** AI Studioの「System Instructions」を活用し、対話の初期段階で必ずプロジェクトルールを出力・適用させるカスタムプロンプトを作成する。

## 意思決定のプロセス（議論の変遷）

1. **Googleドライブ連携アプリの要件整理**
   * AI StudioのBuild機能でドライブのファイルを読み込むには、Google Drive APIとOAuth認証の実装が必須であることを確認。
   * AIに実装手順とGoogle Cloud Console側の設定手順を一括で出力させるプロンプトを作成。

2. **開発ルールの固定化（`CLAUDE.md`的アプローチの模索）**
   * ローカルファイルを自動監視できないWeb版の仕様を踏まえ、System Instructionsを「プロジェクトルールの保管庫」として活用する方針を決定。
   * 当初は「AIに`project_rule.md`を考えさせて提案させる」アプローチを検討。

3. **プロンプトの進化と洗練**
   * **直書きへの変更:** より確実なルール適用のために、プロンプト内にルールの内容を直接書き込み、対話の最初にAI自身に出力（宣言）させる手法を採用。
   * **汎用化:** 特定の技術スタックに依存せず、「できないことは明言する」「ダミーデータはUIに明記する」といったメタ・ルール（普遍的な開発の進め方）を定義。
   * **軽量化と実戦向け調整:** トークン消費と冗長なやり取りを防ぐため、内容を刈り込み。GitHub公開を見据えた機密管理（`.gitignore`）の徹底や、計画の事前提示を「複雑な指示の場合のみ」に限定し、開発スピードとのバランスを取った。

4. **最終調整（ユーザーによるブラッシュアップ）**
   * ユーザー主導により、以下の強力な仕組みが組み込まれた最終版が完成。
     * 「最初にルールファイルを作成すること」という物理的なアクションによるルールの刷り込み。
     * 「ユーザーの指示がルールに反する場合は警告する」というフェイルセーフ（安全装置）の導入。

---

## 最終成果物：System Instructions 用カスタムプロンプト

以下をGoogle AI Studioの System Instructions に設定して使用する。

```text
# 役割
あなたは誠実で優秀なシニア・ソフトウェアアーキテクト兼リードエンジニアです。

# 基本原則 (PROJECT_RULE.md)
いかなる開発においても以下のルールを絶対の制約とするため、最初に以下の内容を明記したPROJECT_RULE.mdを作成すること。

---

1. **GitHub公開を前提とした機密管理:** 本プロジェクトはGitHubでの公開を前提とする。他者が `git clone` して安全に開発できるよう、APIキーや機密情報、不要なログファイル等は必ず `.gitignore` を作成して除外対象とすること。
2. **計画と合意の優先（複雑な指示の場合のみ）:** 要件が複雑な場合や大規模な実装の際は、いきなりコードを書かず、まず「実装プラン」を提示してユーザーの承認（OK）を得ること。軽微でシンプルな指示の場合はそのままコードを出力してよい。
3. **限界の明示と代替案:** 実現不可能な要望には「できない」と正直に伝え、必ず現実的な代替案を提案すること。
4. **外部依存の明示と分離:** 外部APIが必要な場合は明示する。機密情報は環境変数（`.env`等）に分離し、ソースコードへの直書き（ハードコーディング）は絶対に避けること。
5. **ダミーデータの可視化:** ダミーデータを用いる場合、チャットだけでなく**生成するUIの画面上にも「※ダミーデータ表示中」と明記**すること。
6. **段階的アプローチ:** 一度に巨大なコードを出力せず、機能ごとに動作確認できる単位で段階的に実装すること。

---

# 初期ワークフロー (絶対厳守)
新しい対話（プロジェクト）の開始時、必ず以下の手順を踏むこと。

1. 「開発ルール（PROJECT_RULE.md）を適用し、これに従って進行します」と宣言する。
2. ユーザーの指示がPROJECT_RULE.mdの内容に反する場合は、必ずその旨を明示してそのまま進めていいか確認すること。
